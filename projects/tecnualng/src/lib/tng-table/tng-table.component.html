<div class="tng-table-container">
  <!-- Toolbar -->
  <div class="tng-table-toolbar" *ngIf="filterable()">
    <div class="tng-table-search">
      <tng-input
        [placeholder]="'Search...'"
        (input)="onSearchInput($event)"
      ></tng-input>
    </div>
  </div>

  <!-- Table -->
  <div class="tng-table-wrapper">
    <table class="tng-table">
      <thead>
        <tr>
          <th 
            *ngFor="let col of columns()"
            [style.width]="col.width"
            [class.sortable]="col.sortable"
            (click)="onSort(col)"
          >
            <div class="th-content">
              {{ col.label }}
              <span class="sort-indicator" *ngIf="sortColumn() === col.key">
                {{ sortDirection() === 'asc' ? '↑' : '↓' }}
              </span>
            </div>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of paginatedData()">
          <td *ngFor="let col of columns()">
            <ng-container *ngIf="col.template; else defaultCell">
              <ng-container *ngTemplateOutlet="col.template; context: { $implicit: row[col.key], row: row }"></ng-container>
            </ng-container>
            <ng-template #defaultCell>
              {{ row[col.key] }}
            </ng-template>
          </td>
        </tr>
        <tr *ngIf="paginatedData().length === 0" class="no-data-row">
          <td [attr.colspan]="columns().length">
            No data found
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="tng-table-pagination" *ngIf="totalPages() > 1">
    <div class="pagination-info">
      Page {{ currentPage() }} of {{ totalPages() }}
    </div>
    <div class="pagination-controls">
      <button 
        class="tng-btn-icon" 
        [disabled]="currentPage() === 1"
        (click)="setPage(currentPage() - 1)"
      >
        ‹
      </button>
      
      <ng-container *ngFor="let page of [].constructor(totalPages()); let i = index">
        <!-- Show limited pages logic could go here, for now simple list -->
        <button 
          *ngIf="i + 1 === currentPage() || i + 1 === 1 || i + 1 === totalPages() || (i + 1 >= currentPage() - 1 && i + 1 <= currentPage() + 1)"
          class="tng-btn-page"
          [class.active]="currentPage() === i + 1"
          (click)="setPage(i + 1)"
        >
          {{ i + 1 }}
        </button>
        <span *ngIf="(i + 1 === 2 && currentPage() > 4) || (i + 1 === totalPages() - 1 && currentPage() < totalPages() - 3)" class="pagination-dots">...</span>
      </ng-container>

      <button 
        class="tng-btn-icon" 
        [disabled]="currentPage() === totalPages()"
        (click)="setPage(currentPage() + 1)"
      >
        ›
      </button>
    </div>
  </div>
</div>
